<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/28.0.6 Chrome/138.0.7204.100 Electron/37.2.3 Safari/537.36" version="28.0.6">
  <diagram id="lab4" name="Lab4 - Tokyo AWS Data Authority + GCP Clinics via C8200">
    <mxGraphModel dx="1226" dy="793" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t1" value="Lab 4: Tokyo (AWS Data Authority) ↔ Iowa &amp; New York Clinics (GCP) 3× Cisco Catalyst 8200 | IPsec/BGP Overlay | Files stay in Tokyo (read everywhere)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="80" y="20" width="1760" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c_inet" value="Internet / Public Underlay" style="shape=cloud;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#111827;fontColor=#ffffff;strokeColor=#6b7280;" parent="1" vertex="1">
          <mxGeometry x="760" y="120" width="420" height="140" as="geometry" />
        </mxCell>
        <mxCell id="site_tokyo" value="Tokyo Medical Center (AWS) Region: ap-northeast-1 DATA AUTHORITY (PHI stays here)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0b1220;fontColor=#ffffff;strokeColor=#4b5563;" parent="1" vertex="1">
          <mxGeometry x="120" y="330" width="560" height="600" as="geometry" />
        </mxCell>
        <mxCell id="site_iowa" value="Iowa Clinic (GCP) Region: us-central1 READ access via secure app" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0b1220;fontColor=#ffffff;strokeColor=#4b5563;" parent="1" vertex="1">
          <mxGeometry x="740" y="330" width="520" height="280" as="geometry" />
        </mxCell>
        <mxCell id="site_ny" value="New York Clinic (GCP) Region: us-east1 READ access via secure app" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0b1220;fontColor=#ffffff;strokeColor=#4b5563;" parent="1" vertex="1">
          <mxGeometry x="1340" y="330" width="520" height="280" as="geometry" />
        </mxCell>
        <mxCell id="r_tokyo" value="C8200-TOKYO WAN: Gi0/0/0 LAN: Gi0/0/1 BGP ASN: 65010" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#1f2937;fontColor=#ffffff;strokeColor=#93c5fd;" parent="1" vertex="1">
          <mxGeometry x="190" y="420" width="240" height="120" as="geometry" />
        </mxCell>
        <mxCell id="r_iowa" value="C8200-IOWA WAN: Gi0/0/0 LAN: Gi0/0/1 BGP ASN: 65020" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#1f2937;fontColor=#ffffff;strokeColor=#93c5fd;" parent="1" vertex="1">
          <mxGeometry x="820" y="420" width="240" height="120" as="geometry" />
        </mxCell>
        <mxCell id="r_ny" value="C8200-NY WAN: Gi0/0/0 LAN: Gi0/0/1 BGP ASN: 65030" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#1f2937;fontColor=#ffffff;strokeColor=#93c5fd;" parent="1" vertex="1">
          <mxGeometry x="1420" y="420" width="240" height="120" as="geometry" />
        </mxCell>
        <mxCell id="aws_vpc" value="AWS VPC (Tokyo) 10.10.0.0/16" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0f172a;fontColor=#e5e7eb;strokeColor=#64748b;" parent="1" vertex="1">
          <mxGeometry x="160" y="570" width="480" height="330" as="geometry" />
        </mxCell>
        <mxCell id="app_tokyo" value="App / API Tier (central service) Private Subnet" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0f172a;fontColor=#e5e7eb;strokeColor=#64748b;" parent="1" vertex="1">
          <mxGeometry x="190" y="640" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="db_tokyo" value="Medical DB (RDS / DB) TOKYO ONLY" style="shape=cylinder;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#111827;fontColor=#ffffff;strokeColor=#fbbf24;" parent="1" vertex="1">
          <mxGeometry x="430" y="640" width="170" height="140" as="geometry" />
        </mxCell>
        <mxCell id="s3_tokyo" value="Object Storage S3 (PHI files) TOKYO ONLY" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0f172a;fontColor=#e5e7eb;strokeColor=#64748b;" parent="1" vertex="1">
          <mxGeometry x="190" y="780" width="410" height="90" as="geometry" />
        </mxCell>
        <mxCell id="gcp_iowa" value="GCP VPC (Iowa) 10.20.0.0/16 Compute only" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0f172a;fontColor=#e5e7eb;strokeColor=#64748b;" parent="1" vertex="1">
          <mxGeometry x="780" y="570" width="440" height="150" as="geometry" />
        </mxCell>
        <mxCell id="app_iowa" value="Clinic App / VM / GKE (Read-only client)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0f172a;fontColor=#e5e7eb;strokeColor=#64748b;" parent="1" vertex="1">
          <mxGeometry x="810" y="640" width="380" height="70" as="geometry" />
        </mxCell>
        <mxCell id="gcp_ny" value="GCP VPC (NY) 10.30.0.0/16 Compute only" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0f172a;fontColor=#e5e7eb;strokeColor=#64748b;" parent="1" vertex="1">
          <mxGeometry x="1380" y="570" width="440" height="150" as="geometry" />
        </mxCell>
        <mxCell id="app_ny" value="Clinic App / VM / GKE (Read-only client)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#0f172a;fontColor=#e5e7eb;strokeColor=#64748b;" parent="1" vertex="1">
          <mxGeometry x="1410" y="640" width="380" height="70" as="geometry" />
        </mxCell>
        <mxCell id="policy" value="Policy: • PHI/Files stored ONLY in Tokyo • Iowa/NY compute can READ via secure app/API • No data copies in GCP (no persistent PHI storage)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillColor=#111827;fontColor=#ffffff;strokeColor=#f87171;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="740" y="880" width="1120" height="160" as="geometry" />
        </mxCell>
        <mxCell id="e1" value="WAN (Underlay)" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#93c5fd;" parent="1" source="r_tokyo" target="c_inet" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2" value="WAN (Underlay)" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#93c5fd;" parent="1" source="r_iowa" target="c_inet" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3" value="WAN (Underlay)" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#93c5fd;" parent="1" source="r_ny" target="c_inet" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ov1" value="IPsec Tunnel + eBGP 169.254.10.0/30" style="endArrow=block;endFill=1;strokeWidth=3;dashed=1;dashPattern=8 6;strokeColor=#34d399;" parent="1" source="r_tokyo" target="r_iowa" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ov2" value="IPsec Tunnel + eBGP 169.254.20.0/30" style="endArrow=block;endFill=1;strokeWidth=3;dashed=1;dashPattern=8 6;strokeColor=#34d399;" parent="1" edge="1">
          <mxGeometry x="0.0303" y="40" relative="1" as="geometry">
            <mxPoint x="430" y="469.66" as="sourcePoint" />
            <mxPoint x="1420" y="469.66" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lan1" value="LAN" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#a78bfa;" parent="1" source="r_tokyo" target="aws_vpc" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lan2" value="LAN" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#a78bfa;" parent="1" source="r_iowa" target="gcp_iowa" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lan3" value="LAN" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#a78bfa;" parent="1" source="r_ny" target="gcp_ny" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a1" value="" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#fbbf24;" parent="1" source="aws_vpc" target="app_tokyo" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a2" value="read/write" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#fbbf24;" parent="1" source="app_tokyo" target="db_tokyo" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a3" value="files" style="endArrow=block;endFill=1;strokeWidth=2;strokeColor=#fbbf24;" parent="1" source="app_tokyo" target="s3_tokyo" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="flow1" value="HTTPS/API (Read) No PHI storage in GCP" style="endArrow=block;endFill=1;strokeWidth=3;strokeColor=#60a5fa;" parent="1" source="app_iowa" target="app_tokyo" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="flow2" value="HTTPS/API (Read) No PHI storage in GCP" style="endArrow=block;endFill=1;strokeWidth=3;strokeColor=#60a5fa;" parent="1" source="app_ny" target="app_tokyo" edge="1">
          <mxGeometry x="-0.021" y="-19" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="900" y="710" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
